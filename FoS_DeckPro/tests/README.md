# FoS_DeckPro Test Environment

## Overview
This document describes the test environment setup for the FoS_DeckPro project. It covers how tests are isolated, how test artifacts are managed, and the safety mechanisms in place to prevent test data from interfering with production data.

---

## Test Directories

The following directories are used exclusively for testing:

- `test_data/` — Input files and data used by tests.
- `test_output/` — Output files generated by tests.
- `test_artifacts/` — Archived test outputs for debugging and review.

These directories are created automatically if they do not exist.

---

## Test Mode

When running tests, the environment variable `FOS_TEST_MODE` is set to `1`. This signals the application and its configuration manager to:
- Allow access to test directories
- Enable test-specific logic and safety checks

**Never use these directories or test data in production mode.**

---

## Automatic Cleanup

After each test session:
- All files in `test_output/` are moved to a timestamped subdirectory in `test_artifacts/` for later inspection.
- All files in `test_data/` are deleted.
- The test directories are cleaned to ensure no leftover files can pollute future test runs or the main application.

This is managed by fixtures in `conftest.py`.

---

## Safety Features

- **Path Validation:** The configuration manager (`logic/config.py`) prevents access to test directories unless `FOS_TEST_MODE` is set.
- **Test Directory Access:** Attempts to access test directories in production mode will raise an error.
- **Test Artifacts:** Test outputs are preserved for debugging, but never mixed with production data.

---

## Running Tests

To run the tests safely:

```sh
PYTHONPATH=. pytest FoS_DeckPro/tests
```

This will:
- Set up the test environment
- Run all tests
- Clean up test files and preserve artifacts

---

## Adding New Tests

- Use only the provided test directories for any file/database writes.
- Do not reference or write to production data or directories.
- If you need new test data, add it to `test_data/` and ensure it is cleaned up after tests.

---

## Troubleshooting

If you see errors about test directory access, ensure you are running in test mode (via pytest) and not in production mode.

If you need to inspect test outputs, check the `test_artifacts/` directory for timestamped archives of previous test runs.

---

## Contact

For questions or issues with the test environment, contact the project maintainers. 